<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Immersia VR Scene - Vet Anatomy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="/scripts/lib/aframe-v1.7.1.min.js"></script>
    <script src="/scripts/lib/aframe-extras.min.js"></script>
    
    <script src="/scripts/components/text-font-setup.js"></script>
    <script src="/scripts/components/interaction-mode-manager.js"></script>
    
    <script src="/scripts/components/anatomy/index.js"></script>
    <script src="/scripts/components/anatomy/ui/layer-control-ui-helper.js"></script>
    <script src="/scripts/components/anatomy/controls/controls-manager.js"></script>
    <script src="/scripts/components/anatomy/utils/lighting-utils-helper.js"></script>
    
    <script src="/scripts/components/anatomy-layer-manager.js"></script>
    <script src="/scripts/components/anatomy-sidebar-panel.js"></script>
    
    <script src="/scripts/components/hand-tracking/hand-color-manager.js"></script>
    <script src="/scripts/components/hand-tracking/hand-movable.js"></script>
    <script src="/scripts/components/hand-tracking/hand-rotatable.js"></script>
    <script src="/scripts/components/hand-tracking/hand-scalable.js"></script>
    
  </head>

  <body>
    <a-scene renderer="antialias: true" background="color: #0f172a" anatomy-layer-manager text-font-setup interaction-mode-manager="mode: controllers">
      <a-assets>
        <a-asset-item id="font-msdf" src="/assets/fonts/Exo2-Regular-msdf.json"></a-asset-item>
        <img id="font-image" src="/assets/fonts/Exo2-Regular.png" crossorigin="anonymous" />
        
        <a-asset-item id="model-skin" src="/assets/skin.glb"></a-asset-item>
        <a-asset-item
          id="model-muscle"
          src="/assets/muscle.glb"
        ></a-asset-item>
        <a-asset-item id="model-bones" src="/assets/bones.glb"></a-asset-item>
        <a-asset-item id="model-brain" src="/assets/brain.glb"></a-asset-item>
        <a-asset-item
          id="model-circulatory-blue"
          src="/assets/circulatory_blue.glb"
        ></a-asset-item>
        <a-asset-item
          id="model-circulatory-red"
          src="/assets/circulatory_red.glb"
        ></a-asset-item>
        <a-asset-item id="model-guts" src="/assets/guts.glb"></a-asset-item>
        <a-asset-item id="model-heart" src="/assets/heart.glb"></a-asset-item>
        <a-asset-item id="model-liver" src="/assets/liver.glb"></a-asset-item>
        <a-asset-item id="model-lungs" src="/assets/lungs.glb"></a-asset-item>
        <a-asset-item
          id="model-testicles"
          src="/assets/testicles.glb"
        ></a-asset-item>
      </a-assets>

      <a-entity id="rig" position="0 1.6 2.5" movement-controls="speed: 0.15">
        <a-entity id="head" camera look-controls></a-entity>

        <a-entity
          id="right-hand-tracking"
          hand-tracking-grab-controls="hand: right; modelColor: #ffffff; modelOpacity: 0.9; modelStyle: mesh; hoverColor: #00ff00; hoverEnabled: true; color: #ffffff; enabled: false"
          raycaster="enabled: false; objects: .interactable; far: 10; showLine: false"
          hand-color-manager
        ></a-entity>

        <a-entity
          id="left-hand-tracking"
          hand-tracking-grab-controls="hand: left; modelColor: #ffffff; modelOpacity: 0.9; modelStyle: mesh; hoverColor: #00ff00; hoverEnabled: true; color: #ffffff; enabled: false"
          raycaster="enabled: false; objects: .interactable; far: 10; showLine: false"
          hand-color-manager
        ></a-entity>
        
        <a-entity
          id="right-hand-controller"
          laser-controls="hand: right"
          raycaster="enabled: true; objects: .interactable, .sidebar-interactable, .organ-button; far: 10; showLine: true"
          line="color: #ffffff; opacity: 0.95"
        ></a-entity>

        <a-entity
          id="left-hand-controller"
          laser-controls="hand: left"
          raycaster="enabled: true; objects: .interactable, .sidebar-interactable, .organ-button; far: 10; showLine: true"
          line="color: #ffffff; opacity: 0.4"
        ></a-entity>
      </a-entity>

      <a-entity
        id="bones"
        class="interactable"
        gltf-model="#model-bones"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="circulatory-blue"
        class="interactable"
        gltf-model="#model-circulatory-blue"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="circulatory-red"
        class="interactable"
        gltf-model="#model-circulatory-red"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="heart"
        class="interactable"
        gltf-model="#model-heart"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="lungs"
        class="interactable"
        gltf-model="#model-lungs"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="liver"
        class="interactable"
        gltf-model="#model-liver"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="guts"
        class="interactable"
        gltf-model="#model-guts"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="brain"
        class="interactable"
        gltf-model="#model-brain"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="testicles"
        class="interactable"
        gltf-model="#model-testicles"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="muscle"
        class="interactable"
        gltf-model="#model-muscle"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity
        id="skin"
        class="interactable"
        gltf-model="#model-skin"
        grabbable
        hand-movable
        hand-rotatable="rotationSpeed: 2; axis: y"
        hand-scalable="scaleSpeed: 0.5; minScale: 0.1; maxScale: 5"
        visible="false"
      ></a-entity>

      <a-entity light="type: ambient; intensity: 0.6" id="ambient-light"></a-entity>
      <a-entity
        light="type: directional; intensity: 0.7"
        position="2 4 2"
        id="directional-light"
      ></a-entity>
      <a-entity
        light="type: point; intensity: 0.5; distance: 10; decay: 2"
        position="0 1.5 -1"
        id="focus-light"
      ></a-entity>

      <a-entity
        geometry="primitive: plane; width: 20; height: 20"
        rotation="-90 0 0"
        material="color: #404040; roughness: 1"
      ></a-entity>

      <a-sky color="#0f172a"></a-sky>

      <a-entity anatomy-sidebar-panel></a-entity>
      
      <!-- VR Instructions Footer -->
      <a-entity id="vr-instructions-footer" position="0 0.3 -0.7" look-at="#rig">
        <!-- Glassmorphism background -->
        <a-plane
          width="5.5"
          height="0.35"
          position="0 0 0.01"
          color="#FFFFFF"
          opacity="0.1"
          material="transparent: true; opacity: 0.1"
          side="double"
        ></a-plane>
        
        <!-- Border for glassmorphism -->
        <a-plane
          width="5.5"
          height="0.35"
          position="0 0 0.011"
          color="#FFFFFF"
          opacity="0.2"
          material="transparent: true; opacity: 0.2;
          geometry="primitive: plane; width: 5.5; height: 0.35"
        ></a-plane>
        
        <!-- Gamepad icon (purple) -->
        <a-text
          value="ðŸŽ®"
          align="left"
          position="-2.5 0 0.02"
          color="#8B5CF6"
          opacity="0.9"
          width="5"
          scale="0.35 0.35 0.35"
        ></a-text>
        
        <!-- Instruction text -->
        <a-text
          id="vr-instruction-text"
          value="Use os controles VR para navegar e interagir com os modelos 3D"
          align="left"
          position="-1.8 0 0.02"
          color="#FFFFFF"
          opacity="0.7"
          width="9"
          scale="0.3 0.3 0.3"
          wrap-count="55"
        ></a-text>
        
        <!-- Help icon circle -->
        <a-circle
          radius="0.07"
          position="2.4 0 0.02"
          color="#FFFFFF"
          opacity="0.3"
        ></a-circle>
        <a-text
          value="?"
          align="center"
          position="2.4 0 0.03"
          color="#FFFFFF"
          opacity="0.7"
          width="5"
          scale="0.28 0.28 0.28"
        ></a-text>
      </a-entity>
    </a-scene>
  </body>
</html>
